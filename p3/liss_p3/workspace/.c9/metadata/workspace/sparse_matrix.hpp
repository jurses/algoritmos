{"changed":true,"filter":false,"title":"sparse_matrix.hpp","tooltip":"/sparse_matrix.hpp","value":"#include <cstdio>\n#include <iostream>\n#include <cmath>\n\n#include \"template_matrix_t.hpp\"\n#include \"vector_pair_t.hpp\"\n\nusing namespace std;\n\ntypedef matrix_t<double> matrix_double_t;\n\nenum Config {COL_CONF, ROW_CONF};\n\nclass sparse_matrix_t{\nprivate: \n    int     m_;\n    int     n_;\n    vector_pair_vp_t M_;\n    int     conf_; \n    \npublic:\n\n    sparse_matrix_t(const matrix_double_t& M, double eps, Config conf)\n    m_(M.get_m()),\n    n_(M.get_n()),\n    M_(),\n    conf_(conf)\n    {\n        \n       \n        // RECORRER MATRIZ DENSA PARA SABER TAMAÑO DE SPASE MATRIX \n        int nz_row = 0;\n        for (int i = 1; i <= m_; i++)\n            if (count.get_v(i) > 0)\n                nz_row ++;\n                \n        \n        M_.resize(nz_row);\n        \n         /// INCIALIZAR LA MATRIZ PARA Q NO CONTENGA BASURA \n        for (int i = 1; i < M_.get_size(); i++){\n            M_[i].get_set = 0;\n        }\n        \n        nz_row = 0;\n        \n        for (int i = 1 <=m_; i++)\n            if(count.get_v(i - 1) > 0) {\n                M_.get_set_v(nz_row).get_inx() = i;\n                M_.get_set_v(nz_row).get_val().resize(count.get_v(i - 1));\n                \n                \n                int nz = 0;\n                for (int j = 1; j <= n_; j++)\n                    if (fabs(M.get(i, j)) > eps){\n                        M_.get_set_v(nz_row).get_val().get_set_v(nz).get_inx()= j;\n                        M_.get_set_v(nz_row).get_val().get_set_v(nz).get_val()= M.get(i, j);\n                        nz++;\n                    }\n            }\n    }\n    \n    ~sparse_matrix_t{}\n    \n    ostream& sparse_matrix_t::write(ostream& os) const{\n        \n        M_.write(ostream& os);\n        return os;\n        \n    }\n    \n    matrix_double_t& sparse_matrix_t::producto(const matrix_double_t& M, const sparse_matrix_t& N ){\n        \n        matrix_double_t R;\n        \n        for (int i=1; i<=m_; i++){\n            for (int j = 1; j<= m_ * n_; j++){\n                R[i][j]=0;\n                for (int k=1; k<=n_; k++)\n                     {R[i][j]=   M[i][k] * N[k][j];\n                }\n            }\n        }\n        \n        return R;\n    }\n}","undoManager":{"mark":-88,"position":100,"stack":[[{"start":{"row":30,"column":37},"end":{"row":30,"column":38},"action":"insert","lines":["P"],"id":2148}],[{"start":{"row":30,"column":38},"end":{"row":30,"column":39},"action":"insert","lines":["A"],"id":2149}],[{"start":{"row":30,"column":39},"end":{"row":30,"column":40},"action":"insert","lines":["R"],"id":2150}],[{"start":{"row":30,"column":40},"end":{"row":30,"column":41},"action":"insert","lines":["A"],"id":2151}],[{"start":{"row":30,"column":40},"end":{"row":30,"column":41},"action":"remove","lines":["A"],"id":2152}],[{"start":{"row":30,"column":39},"end":{"row":30,"column":40},"action":"remove","lines":["R"],"id":2153}],[{"start":{"row":30,"column":38},"end":{"row":30,"column":39},"action":"remove","lines":["A"],"id":2154}],[{"start":{"row":30,"column":37},"end":{"row":30,"column":38},"action":"remove","lines":["P"],"id":2155}],[{"start":{"row":30,"column":36},"end":{"row":30,"column":37},"action":"remove","lines":[" "],"id":2156}],[{"start":{"row":30,"column":35},"end":{"row":30,"column":36},"action":"remove","lines":["I"],"id":2157}],[{"start":{"row":30,"column":34},"end":{"row":30,"column":35},"action":"remove","lines":["S"],"id":2158}],[{"start":{"row":30,"column":33},"end":{"row":30,"column":34},"action":"remove","lines":["A"],"id":2159}],[{"start":{"row":30,"column":33},"end":{"row":30,"column":34},"action":"insert","lines":["P"],"id":2160}],[{"start":{"row":30,"column":34},"end":{"row":30,"column":35},"action":"insert","lines":["A"],"id":2161}],[{"start":{"row":30,"column":35},"end":{"row":30,"column":36},"action":"insert","lines":["R"],"id":2162}],[{"start":{"row":30,"column":36},"end":{"row":30,"column":37},"action":"insert","lines":["A"],"id":2163}],[{"start":{"row":30,"column":37},"end":{"row":30,"column":38},"action":"insert","lines":[" "],"id":2164}],[{"start":{"row":30,"column":38},"end":{"row":30,"column":39},"action":"insert","lines":["S"],"id":2165}],[{"start":{"row":30,"column":39},"end":{"row":30,"column":40},"action":"insert","lines":["A"],"id":2166}],[{"start":{"row":30,"column":40},"end":{"row":30,"column":41},"action":"insert","lines":["B"],"id":2167}],[{"start":{"row":30,"column":41},"end":{"row":30,"column":42},"action":"insert","lines":["E"],"id":2168}],[{"start":{"row":30,"column":42},"end":{"row":30,"column":43},"action":"insert","lines":["R"],"id":2169}],[{"start":{"row":30,"column":43},"end":{"row":30,"column":44},"action":"insert","lines":[" "],"id":2170}],[{"start":{"row":30,"column":44},"end":{"row":30,"column":45},"action":"insert","lines":["T"],"id":2171}],[{"start":{"row":30,"column":45},"end":{"row":30,"column":46},"action":"insert","lines":["A"],"id":2172}],[{"start":{"row":30,"column":46},"end":{"row":30,"column":47},"action":"insert","lines":["M"],"id":2173}],[{"start":{"row":30,"column":47},"end":{"row":30,"column":48},"action":"insert","lines":["A"],"id":2174}],[{"start":{"row":30,"column":48},"end":{"row":30,"column":49},"action":"insert","lines":["Ñ"],"id":2175}],[{"start":{"row":30,"column":49},"end":{"row":30,"column":50},"action":"insert","lines":["O"],"id":2176}],[{"start":{"row":30,"column":50},"end":{"row":30,"column":51},"action":"insert","lines":[" "],"id":2177}],[{"start":{"row":30,"column":51},"end":{"row":30,"column":52},"action":"insert","lines":["D"],"id":2178}],[{"start":{"row":30,"column":52},"end":{"row":30,"column":53},"action":"insert","lines":["E"],"id":2179}],[{"start":{"row":30,"column":53},"end":{"row":30,"column":54},"action":"insert","lines":[" "],"id":2180}],[{"start":{"row":30,"column":54},"end":{"row":30,"column":55},"action":"insert","lines":["S"],"id":2181}],[{"start":{"row":30,"column":55},"end":{"row":30,"column":56},"action":"insert","lines":["P"],"id":2182}],[{"start":{"row":30,"column":56},"end":{"row":30,"column":57},"action":"insert","lines":["A"],"id":2183}],[{"start":{"row":30,"column":57},"end":{"row":30,"column":58},"action":"insert","lines":["S"],"id":2184}],[{"start":{"row":30,"column":58},"end":{"row":30,"column":59},"action":"insert","lines":["E"],"id":2185}],[{"start":{"row":30,"column":59},"end":{"row":30,"column":60},"action":"insert","lines":[" "],"id":2186}],[{"start":{"row":30,"column":60},"end":{"row":30,"column":61},"action":"insert","lines":["M"],"id":2187}],[{"start":{"row":30,"column":61},"end":{"row":30,"column":62},"action":"insert","lines":["A"],"id":2188}],[{"start":{"row":30,"column":62},"end":{"row":30,"column":63},"action":"insert","lines":["T"],"id":2189}],[{"start":{"row":30,"column":63},"end":{"row":30,"column":64},"action":"insert","lines":["R"],"id":2190}],[{"start":{"row":30,"column":64},"end":{"row":30,"column":65},"action":"insert","lines":["I"],"id":2191}],[{"start":{"row":30,"column":65},"end":{"row":30,"column":66},"action":"insert","lines":["X"],"id":2192}],[{"start":{"row":30,"column":66},"end":{"row":30,"column":67},"action":"insert","lines":[" "],"id":2193}],[{"start":{"row":39,"column":29},"end":{"row":39,"column":30},"action":"remove","lines":["_"],"id":2194}],[{"start":{"row":39,"column":28},"end":{"row":39,"column":29},"action":"remove","lines":["m"],"id":2195}],[{"start":{"row":39,"column":28},"end":{"row":39,"column":29},"action":"insert","lines":["m"],"id":2196}],[{"start":{"row":39,"column":29},"end":{"row":39,"column":30},"action":"insert","lines":["_"],"id":2197}],[{"start":{"row":39,"column":30},"end":{"row":39,"column":31},"action":"insert","lines":[":"],"id":2198}],[{"start":{"row":39,"column":30},"end":{"row":39,"column":31},"action":"remove","lines":[":"],"id":2199}],[{"start":{"row":39,"column":29},"end":{"row":39,"column":30},"action":"remove","lines":["_"],"id":2200}],[{"start":{"row":39,"column":28},"end":{"row":39,"column":29},"action":"remove","lines":["m"],"id":2201}],[{"start":{"row":39,"column":28},"end":{"row":39,"column":29},"action":"insert","lines":["k"],"id":2202}],[{"start":{"row":39,"column":28},"end":{"row":39,"column":29},"action":"remove","lines":["k"],"id":2203}],[{"start":{"row":39,"column":28},"end":{"row":39,"column":29},"action":"insert","lines":["M"],"id":2204}],[{"start":{"row":39,"column":29},"end":{"row":39,"column":30},"action":"insert","lines":["_"],"id":2205}],[{"start":{"row":39,"column":30},"end":{"row":39,"column":31},"action":"insert","lines":["."],"id":2206}],[{"start":{"row":39,"column":31},"end":{"row":39,"column":32},"action":"insert","lines":["g"],"id":2207}],[{"start":{"row":39,"column":32},"end":{"row":39,"column":33},"action":"insert","lines":["e"],"id":2208}],[{"start":{"row":39,"column":33},"end":{"row":39,"column":34},"action":"insert","lines":["t"],"id":2209}],[{"start":{"row":39,"column":34},"end":{"row":39,"column":35},"action":"insert","lines":["_"],"id":2210}],[{"start":{"row":39,"column":35},"end":{"row":39,"column":36},"action":"insert","lines":["s"],"id":2211}],[{"start":{"row":39,"column":36},"end":{"row":39,"column":37},"action":"insert","lines":["i"],"id":2212}],[{"start":{"row":39,"column":37},"end":{"row":39,"column":38},"action":"insert","lines":["z"],"id":2213}],[{"start":{"row":39,"column":38},"end":{"row":39,"column":39},"action":"insert","lines":["e"],"id":2214}],[{"start":{"row":39,"column":39},"end":{"row":39,"column":41},"action":"insert","lines":["()"],"id":2215}],[{"start":{"row":39,"column":41},"end":{"row":39,"column":42},"action":"insert","lines":[";"],"id":2216}],[{"start":{"row":39,"column":42},"end":{"row":39,"column":43},"action":"insert","lines":[" "],"id":2217}],[{"start":{"row":39,"column":43},"end":{"row":39,"column":44},"action":"insert","lines":["i"],"id":2218}],[{"start":{"row":39,"column":44},"end":{"row":39,"column":45},"action":"insert","lines":["+"],"id":2219}],[{"start":{"row":39,"column":45},"end":{"row":39,"column":46},"action":"insert","lines":["+"],"id":2220}],[{"start":{"row":39,"column":47},"end":{"row":39,"column":48},"action":"insert","lines":["{"],"id":2221}],[{"start":{"row":39,"column":48},"end":{"row":41,"column":9},"action":"insert","lines":["","            ","        }"],"id":2222}],[{"start":{"row":41,"column":9},"end":{"row":41,"column":61},"action":"remove","lines":[" /// INCIALIZAR LA MATRIZ PARA Q NO CONTENGA BASURA "],"id":2223}],[{"start":{"row":38,"column":8},"end":{"row":39,"column":0},"action":"insert","lines":["",""],"id":2224},{"start":{"row":39,"column":0},"end":{"row":39,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":39,"column":8},"end":{"row":39,"column":60},"action":"insert","lines":[" /// INCIALIZAR LA MATRIZ PARA Q NO CONTENGA BASURA "],"id":2225}],[{"start":{"row":41,"column":12},"end":{"row":41,"column":13},"action":"insert","lines":["M"],"id":2226}],[{"start":{"row":41,"column":13},"end":{"row":41,"column":14},"action":"insert","lines":[":"],"id":2227}],[{"start":{"row":41,"column":13},"end":{"row":41,"column":14},"action":"remove","lines":[":"],"id":2228}],[{"start":{"row":41,"column":13},"end":{"row":41,"column":14},"action":"insert","lines":["_"],"id":2229}],[{"start":{"row":41,"column":14},"end":{"row":41,"column":16},"action":"insert","lines":["[]"],"id":2230}],[{"start":{"row":41,"column":15},"end":{"row":41,"column":16},"action":"insert","lines":["i"],"id":2231}],[{"start":{"row":41,"column":15},"end":{"row":41,"column":16},"action":"remove","lines":["i"],"id":2232}],[{"start":{"row":41,"column":15},"end":{"row":41,"column":16},"action":"insert","lines":["i"],"id":2233}],[{"start":{"row":41,"column":17},"end":{"row":41,"column":18},"action":"insert","lines":[" "],"id":2234}],[{"start":{"row":41,"column":18},"end":{"row":41,"column":19},"action":"insert","lines":["="],"id":2235}],[{"start":{"row":41,"column":19},"end":{"row":41,"column":20},"action":"insert","lines":[" "],"id":2236}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"insert","lines":["0"],"id":2237}],[{"start":{"row":41,"column":21},"end":{"row":41,"column":22},"action":"insert","lines":[";"],"id":2238}],[{"start":{"row":41,"column":17},"end":{"row":41,"column":18},"action":"insert","lines":["."],"id":2239}],[{"start":{"row":41,"column":18},"end":{"row":41,"column":19},"action":"insert","lines":["g"],"id":2240}],[{"start":{"row":41,"column":19},"end":{"row":41,"column":20},"action":"insert","lines":["e"],"id":2241}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"insert","lines":["t"],"id":2242}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"remove","lines":["t"],"id":2243}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"insert","lines":["t"],"id":2244}],[{"start":{"row":41,"column":21},"end":{"row":41,"column":22},"action":"insert","lines":["_"],"id":2245}],[{"start":{"row":41,"column":22},"end":{"row":41,"column":23},"action":"insert","lines":["s"],"id":2246}],[{"start":{"row":41,"column":23},"end":{"row":41,"column":24},"action":"insert","lines":["e"],"id":2247}],[{"start":{"row":41,"column":24},"end":{"row":41,"column":25},"action":"insert","lines":["t"],"id":2248}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":2,"column":16},"end":{"row":2,"column":16},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":true,"wrapToView":true},"firstLineState":0},"timestamp":1460001216000}